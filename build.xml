<project default="build" name='Ant test' >
		
	<target name="no_op">	
	</target>
	
	<target name="build">
    <echo message="the simple error message should be shown in overview page and fail the build when switch on the failure condition 'an error message is logged by build runner'" />
    <echo message="##teamcity[message text='simple error' errorDetails='simple error detail message' status='ERROR' flowId='simpleerror']" />
    
    <echo message="the error message between compilation block should be shown in overview page and fail the build even not switch on the failure condition 'an error message is logged by build runner'" />
    <echo message="##teamcity[compilationStarted compiler='msbuild' flowId='msbuild']" />
    <echo message="##teamcity[message text='error between compilation block' errorDetails='this is the error detail message between compilation block' status='ERROR' flowId='msbuild']" />
    <echo message="##teamcity[compilationFinished compiler='msbuild' flowId='msbuild']" />
	</target>

	<target name="test">
	  <echo message="this is test failure which should be shown as failed in overview page" />
    
    <echo message="##teamcity[testStarted name='MyTest.test1' flowId='test']" />
    <echo message="##teamcity[testFailed name='MyTest.test1' message='failure message' details='message and stack trace' flowId='test']" />  
    <echo message="##teamcity[testFinished name='MyTest.test1' duration='50' flowId='test']" />
    
    <echo message="Simulate parallel message" />
    <echo message="##teamcity[testSuiteStarted name='suiteName1' flowId='suite1']" />
    <echo message="##teamcity[testSuiteStarted name='suiteName2' flowId='suite2']" />
    <echo message="##teamcity[testStarted name='package_or_namespace1.ClassName.TestName' flowId='test1']" />
    <echo message="##teamcity[testStarted name='package_or_namespace2.ClassName.TestName' flowId='test2']" />
    <echo message="#teamcity[testFailed name='package_or_namespace1.ClassName.TestName' message='test1: The number should be 20000' details='junit.framework.AssertionFailedError: expected:<20000> but was:<10000>|n|r    at junit.framework.Assert.fail(Assert.java:47)|n|r    at junit.framework.Assert.failNotEquals(Assert.java:280)|n|r...' flowId='test1']" />
    <echo message="##teamcity[testFinished name='package_or_namespace1.ClassName.TestName' flowId='test1']" />
    <echo message="#teamcity[testFailed name='package_or_namespace2.ClassName.TestName' message='test2: The number should be 20000' details='junit.framework.AssertionFailedError: expected:<20000> but was:<10000>|n|r    at junit.framework.Assert.fail(Assert.java:47)|n|r    at junit.framework.Assert.failNotEquals(Assert.java:280)|n|r...' flowId='test2']" />
    <echo message="##teamcity[testFinished name='package_or_namespace2.ClassName.TestName' flowId='test2']" />
    <echo message="##teamcity[testSuiteFinished name='suiteName1' flowId='suite1']" />
    <echo message="##teamcity[testSuiteFinished name='suiteName2' flowId='suite2']" />
	</target>
  
  <target name="java">
    <javac srcdir="src" failonerror="true" />
    <java classname="Main" classpath="src" failonerror="true">
    </java>
  </target>
</project>
