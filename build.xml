<project default="build" name='Ant test' >
		
	<target name="no_op">	
	</target>
	
	<target name="build">
	  <echo message="this is ant build" />
    <echo message="##teamcity[message text='simple error' errorDetails='error detail message' status='ERROR' flowId='simpleerror']" />
    
    <echo message="##teamcity[compilationStarted compiler='msbuild' flowId='msbuild']" />
    <echo message="##teamcity[message text='error between compilation block' errorDetails='this is the error detail message' status='ERROR' flowId='msbuild']" />
    <echo message="##teamcity[compilationFinished compiler='msbuild' flowId='msbuild']" />
    <echo message="##teamcity[buildStatus status='FAILURE' text='build status with failure' flowId='msbuild']" />
	</target>

	<target name="test">
	  <echo message="this is test failure" />
    
    <echo message="##teamcity[testStarted name='MyTest.test1' flowId='test']" />
    <echo message="##teamcity[testFailed name='MyTest.test1' message='failure message' details='message and stack trace' flowId='test']" />  
    <echo message="##teamcity[testFinished name='MyTest.test1' duration='50' flowId='test']" />
	</target>
  
  <target name="java">
    <javac srcdir="src" failonerror="true" />
    <java classname="Main" classpath="src" failonerror="true">
    </java>
  </target>
</project>
